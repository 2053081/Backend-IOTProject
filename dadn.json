{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"@%AWbhn!f?vIWd?zu}6A\">LED</variable><variable id=\"WG=(8peCnO}`ctU((%@B\">PUMP</variable></variables><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-387\" y=\"-188\"><statement name=\"ONSTART\"><block type=\"yolobit_basic_scroll_text\" id=\"vE(clw0)lAJ-R0r./Y(|\"><value name=\"message\"><shadow type=\"text\" id=\"wP@`CBZ93^4.@pu#W2,/\"><field name=\"TEXT\">IOT</field></shadow></value><next><block type=\"yolobit_mqtt_connect_wifi\" id=\"Lo{_*bv9VGL{6XAOnI,C\"><value name=\"WIFI\"><shadow type=\"text\" id=\"Uy9J.L1kid@g:KPOh0hq\"><field name=\"TEXT\">iPhone</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"@dX(D$a7u5iLjpWi7O.n\"><field name=\"TEXT\">hahahaha</field></shadow></value><next><block type=\"yolobit_mqtt_connect_default_servers\" id=\"=-9ja,VGYYIhLS,8ZN$v\"><field name=\"SERVER\">io.adafruit.com</field><value name=\"USERNAME\"><shadow type=\"text\" id=\"s6Qzyk/3ZS$SmpEMmz1R\"><field name=\"TEXT\">VuHung</field></shadow></value><value name=\"KEY\"><shadow type=\"text\" id=\"9xh.]f)zo`TWD9P}yF),\"><field name=\"TEXT\">aio_xIaz54e4Ced8I3w3Nqr1Op8pDo06</field></shadow></value><next><block type=\"yolobit_basic_scroll_number\" id=\"_8d,)#uZ]od./LrOMZsA\"><value name=\"message\"><shadow type=\"math_number\" id=\"NPL{]3x#$(o+PoJCU$|5\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"yolobit_mqtt_on_receive_message\" id=\"@3fTmxWARhnTd$g(2VY4\"><field name=\"message\" id=\"@%AWbhn!f?vIWd?zu}6A\">LED</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"(_Y~QdgIb%C4[|;!Y/Eu\"><field name=\"TEXT\">LED</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"vZ9XvDqV~VGiMX[E#wAm\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"Dg[ubW3];+A;-W0^LlUu\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"q]hA@_C`vM/,v*,;ym[s\"><field name=\"VAR\" id=\"@%AWbhn!f?vIWd?zu}6A\">LED</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"@HJLgi4w{,=lEOOCFUN-\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"}}nhX~=nHU+A+lkA}h{N\"><field name=\"port\">pin14</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"viGkUuAtes,-TSUHZ8L,\"><field name=\"COLOUR\">#ff0000</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_led_tiny_set_all\" id=\"57Y!bH:|A#]z;[hoor6g\"><field name=\"port\">pin14</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"v7@CBj2iSxw!34Uwrph{\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement></block></statement><next><block type=\"yolobit_mqtt_on_receive_message\" id=\"qln5?|58p@w`j2wD@2*a\"><field name=\"message\" id=\"WG=(8peCnO}`ctU((%@B\">PUMP</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"^ykbQk90#ix0^2P~CPKG\"><field name=\"TEXT\">PUMP</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"Du(y8E1Ae6OS:vG`|Q%l\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"aQ8R/n*S9I``$FK9iqA`\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"vwr@yYHX|V[dFIeexd~5\"><field name=\"VAR\" id=\"WG=(8peCnO}`ctU((%@B\">PUMP</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"n7_EL[:t,bl%?PTkvLJj\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"FlY2},-6nWR!QyA;?.uV\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"C_kIm1/Nj[gRs-%s~eQ{\"><field name=\"NUM\">70</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_minifan\" id=\"9V1D!vEi4MyI;r@O+VSG\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"u*)`ncOKtLx_L^%WZ_[L\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_mqtt_check_message\" id=\"Cpk.UA=yT[um:i!4bM1g\"><next><block type=\"yolobit_events_run\" id=\"T]`3}9U)lS7iCMxSA[C^\"><next><block type=\"yolobit_basic_scroll_text\" id=\"Z]b`BopI~P%QiAz[}OO3\"><value name=\"message\"><shadow type=\"text\" id=\"IwS|1rQ36HyE+,l:9)BD\"><field name=\"TEXT\">Hello, World!</field></shadow><block type=\"aiot_dht_read\" id=\"rP3A~W1{W?@x?:M^UI;F\"><field name=\"DATA\">TEMP</field></block></value><next><block type=\"yolobit_basic_scroll_text\" id=\"O)]U7Wlnfc,uh]8^lN}Q\"><value name=\"message\"><shadow type=\"text\" id=\"IwS|1rQ36HyE+,l:9)BD\"><field name=\"TEXT\">Hello, World!</field></shadow><block type=\"aiot_dht_read\" id=\";I:{x$Xc9|(i6J5.eDl4\"><field name=\"DATA\">HUMID</field></block></value><next><block type=\"yolobit_basic_sleep\" id=\"8]lLrCdU1NJbf5;OFrZ,\"><value name=\"duration\"><shadow type=\"math_number\" id=\"u6mDQ1b$SGxi-M:eu{=*\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"x{*sc}J()YC,qBxXpQNJ\" x=\"238\" y=\"12\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"$[5Gl}V5v;D#iD|3*i,s\"><field name=\"NUM\">10</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\"NC_@+o6R;4V[p6x;JhAt\"><next><block type=\"yolobit_mqtt_publish\" id=\"$:jEE3#Bfgm?[BuR}q(V\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"U?H3zt?Rc!V(=5T4)GPH\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"$WUEJlY]cAaB$cD@hX(z\"><field name=\"DATA\">HUMID</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"OVfSSX.KpBs@h/SIBb/i\"><field name=\"TEXT\">moisture</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\",Vdu`My8Ra~:(Ab;K|7D\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"hNDuVI}hZ}fD#~FpAL7.\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"T9*XCemvME2ElYNK^6q}\"><field name=\"DATA\">TEMP</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"sIls9)IB=c`g@RV?]uI-\"><field name=\"TEXT\">temperature</field></shadow></value></block></next></block></next></block></statement></block></xml>","python":"from yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom mqtt import *\nfrom aiot_rgbled import RGBLed\nfrom event_manager import *\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nimport time\n\ntiny_rgb = RGBLed(pin14.pin, 4)\n\ndef on_mqtt_message_receive_callback__LED_(LED):\n  global PUMP\n  if LED == 1:\n    tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n  else:\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n\ndef on_mqtt_message_receive_callback__PUMP_(PUMP):\n  global LED\n  if PUMP == 1:\n    pin10.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  else:\n    pin10.write_analog(round(translate(0, 0, 100, 0, 1023)))\n\nevent_manager.reset()\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_x_s_c_J_Y():\n  global LED, PUMP\n  aiot_dht20.read_dht20()\n  mqtt.publish('moisture', (aiot_dht20.dht20_humidity()))\n  mqtt.publish('temperature', (aiot_dht20.dht20_temperature()))\n\nevent_manager.add_timer_event(10000, on_event_timer_callback_x_s_c_J_Y)\n\nif True:\n  display.scroll('IOT')\n  mqtt.connect_wifi('iPhone', 'hahahaha')\n  mqtt.connect_broker(server='io.adafruit.com', port=1883, username='VuHung', password='aio_xIaz54e4Ced8I3w3Nqr1Op8pDo06')\n  display.scroll(1)\n  mqtt.on_receive_message('LED', on_mqtt_message_receive_callback__LED_)\n  mqtt.on_receive_message('PUMP', on_mqtt_message_receive_callback__PUMP_)\n\nwhile True:\n  mqtt.check_message()\n  event_manager.run()\n  display.scroll((aiot_dht20.dht20_temperature()))\n  display.scroll((aiot_dht20.dht20_humidity()))\n  time.sleep_ms(1000)\n","name":"dadn","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"}],"device":"yolobit"}